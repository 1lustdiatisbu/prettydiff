<?php
include('header.php');
echo('<body id="doc"><h1><a href="http://prettydiff.com/">Pretty Diff</a> - API Documentation</h1>');
//echo('<h2>Pretty Diff API disabled due to excessive memory consumption.  Investigation is underway to determine how and what triggers this failure.</h2>');

echo('<p>Try <a href="http://prettydiff.com/">Pretty Diff</a> tool on the client side.</p>');
echo('<div>');
    echo('<h2>Options</h2><div>');
        echo('<h3>Special Notes and Limitations</h3>');
        echo('<p></p>');
        echo('<p>To access the PrettyDiff API connect to http://prettydiff.com:8000/api/ with an HTTP POST. Access the API demo at <a href="http://prettydiff.com/api_test.php">http://prettydiff.com/api_test.php</a>. Data may be passed to the API in any order.</p>');
        echo('<p>Pretty Diff API makes all possible effort to preserve file names passed though the <em>pdiff_sourcefile</em> field. For output transmitted via email files with a "js" extension are renamed to a "txt" extension to prevent email server firewalls from blocking distribution of the output.</p>');
        echo('<p>In order to prevent Pretty Diff API being abused as a launchpad for SPAM inject a limit of 10 email addresses will be accepted per submission. A 2 second delay is executed between each sent email.</p>');
        echo('<p>At this time Pretty Diff API accepts a maximum total payload of 2mb per connection. If the 2mb is exceeded an error is returned and the connection is terminated prior to any processing upon the data supplied.</p>');
    echo('</div><div>');
        echo('<h3>Fields</h3><ul>');
        echo('<li><strong>pdiff_source</strong> - This is the source code to be manipulated.  This field can only be empty if a file is uploaded in the field <em>pdiff_sourcefile</em>. It can contain any text data as supplied from a text field or textarea.</li>');
        echo('<li><strong>pdiff_sourcefile</strong> - This is a file to upload in place of the text contents represented by <em>pdiff_source</em>. This field must be a file containing text characters. This field, if used, replaces the contents of <em>pdiff_source</em>. If binary data is submitted through this field it will be ignored. If this field is not a file it will produce an error.</li>');
        echo('<li><strong>pdiff_sourcepath</strong> - This is a URI to point to in place of uploaded data.  This data will replace the values of <em>pdiff_source</em> and <em>pdiff_sourcefile</em>.</li>');
        echo('<li><strong>pdiff_diff</strong> - This is the source code to be compared. This field is required if <em>pdiff_mode</em> is set to "diff" and nothing is passed through the field <em>pdiff_difffile</em>. This field may contain any text data.</li>');
        echo('<li><strong>pdiff_difffile</strong> - This is a file to upload in place of the text contents represented by <em>pdiff_difffile</em>. This field must be a file containing text characters. This field, if used, replaces the contents of <em>pdiff_diff</em>. If binary data is submitted through this field it will be ignoed. If this field is not a file it will produce an error.</li>');
        echo('<li><strong>pdiff_diffpath</strong> - This is a URI to point to in place of uploaded diff data.  This data will replace the values of <em>pdiff_diff</em> and <em>pdiff_difffile</em>.</li>');
        echo('<li><strong>pdiff_mode</strong> - This field determines what the API is doing. This field is optional and defaults to "beautify". Accepted values:<ul><li>beautify</li><li>minify</li><li>diff</li></ul></li>');
        echo('<li><strong>pdiff_lang</strong> - This field determines the language of the submitted code. This field is optional and defaults to "auto". A value of "auto" means the language can be any of JavaScript, CSS, or Markup. Accepted values: <ul><li>auto</li><li>javascript</li><li>csv</li><li>css</li><li>markup</li><li>text</li></ul></li>');
        echo('<li><strong>pdiff_csvchar</strong> - This field is a string of one or more text characters used to represent a factor of separation when <em>pdiff_lang</em> is set to "csv". If <em>pdiff_lang</em> is not set to "csv" this field is not used. Unlike the clientside form of Pretty Diff tool the API does not use charDecoder.js to decode character entity references, so any value supplied through the API is a text literal.</li>');
        echo('<li><strong>pdiff_out</strong> - This field determines how the application sends its response. This field is optional with the default value of "web", which will return a text or html for user-agent parsing. The value "download" forces a file download and the value email will send an email with a file attachment to the addresses specified in <em>pdiff_email</em>. Accepted values: <ul><li>web</li><li>download</li><li>email</li></ul></li>');
        echo('<li><strong>pdiff_email</strong> - This field accepts a comma separated list of email addresses. Only the first ten email addresses supplied will be processes and there is a two second delay between processing of each email address. There are no warnings provided if an email fails to reach its destination for any reason.</li>');
        echo('<li><strong>pdiff_insize</strong> - This field accepts an integer representing the character length of an indentation. This field is optional with a default value of "4". If the supplied value is not a number the value will be ignored the default will be used.</li>');
        echo('<li><strong>pdiff_inchar</strong> - This field accepts a string of text character that make up an indentation. This field is optional with a default value set to a single space character.</li>');
        echo('<li><strong>pdiff_comments</strong> - This field determines if code comments should be indented or if comment should be denied of indentation. This field is optional with a default value of "indent". Accepted values: <ul><li>indent</li><li>noindent</li></ul></li>');
        echo('<li><strong>pdiff_indent</strong> - This field accepts a string value of "knr" or "allman". This field is entirely optional, applies only towards JavaScript beautification, and defaults to "knr".</li>');
        echo('<li><strong>pdiff_style</strong> - This field determines if the contents of "style" and "script" of HTML should be indented matching the markup code\'s indentation or if such contents must be indended independently. This field is optional with a default value of "indent". Accepted values: <ul><li>indent</li><li>noindent</li></ul></li>');
        echo('<li><strong>pdiff_html</strong> - This field is ignored if the value of <em>pdiff_lang</em> is not "markup". This field alerts the markup algorithms that certain tags specific to HTML may be singleton tags even if not properly formatted as such, for instance: &lt;br&gt;. This field is optional with a default value of "html-no". Accepted values: <ul><li>html-no</li><li>html-yes</li></ul></li>');
        echo('<li><strong>pdiff_context</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field accepts 0 and positive integers, whose value pads lines of differences in the diff report with the supplied number of lines of code that is not different and removes all other lines of code which are not different. The value "0", for instance, removes all lines from the different report that do not indicated differences. This field is optional and defaults to an empty string, which tells the diff report to display every line of code.</li>');
        echo('<li><strong>pdiff_content</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field determines if content in markup or string literals in JavaScript should be normalized to reduces the number of possible false-positive differences in the diff report. If the value "content-yes" is supplied content is converted to the word "text". This field is optional with a default value "content-no". Accepted values: <ul><li>content-yes</li><li>content-no</li></ul></li>');
        echo('<li><strong>pdiff_quote</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field determines if quote characters should be normalized to reduces the number of possible false-positive differences in the diff report. If the value "true" is supplied single quote characters are converted to double quote characters just prior to execution of the diff algorithm. This field is optional with a default value "false". Accepted values: <ul><li>true</li><li>false</li></ul></li>');
        echo('<li><strong>pdiff_semicolon</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field determiens if semicolons at the end of code lines should be normalized to reduce the number of possible false-positive differences in the diff report. If the value "true" is supplied semicolon characters occurring immediately prior to new line characters are removed prior to execution of the diff algorithm. This field is optional with a default value of "false". Accepted values: <ul><li>true</li><li>false</li></ul></li>');
        echo('<li><strong>pdiff_diffview</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field determines the format of the diff report, which it differences display inline or side by side. This field is optional with a default value of "sidebyside". Accepted values: <ul><li>sidebyside</li><li>inline</li></ul></li>');
        echo('<li><strong>pdiff_topcoms</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "minify". This field allows comments that exist at the top of input prior to any code of CSS or JavaScript code. Accept values of boolean type: <ul><li>false</li><li>true</li></ul></li>');
        echo('<li><strong>pdiff_sourcelabel</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field accepts any string to be used as a descriptive label in the diff report indentified the contents of the source data. This field is optional.</li>');
        echo('<li><strong>pdiff_difflabel</strong> - This field is ignored if the value of <em>pdiff_mode</em> is not "diff". This field accepts any string to be used as a descriptive label in the diff report indentified the contents of the difference data. This field is optional.</li>');
    echo('</ul></div><div>');
        echo('<h3>Contact</h3>');
        echo('<p>Please send all bugs, praise, or requests to <a href="mailto:austin.cheney@us.army.mil">austin.cheney@us.army.mil</a>.</p>');
    echo('</div>');
echo('</div>');
echo('</body></html>'); ?>